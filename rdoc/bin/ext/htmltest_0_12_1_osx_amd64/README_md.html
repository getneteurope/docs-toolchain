<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>README - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
  var index_rel_prefix = "../../../";
</script>

<script src="../../../js/navigation.js" defer></script>
<script src="../../../js/search.js" defer></script>
<script src="../../../js/search_index.js" defer></script>
<script src="../../../js/searcher.js" defer></script>
<script src="../../../js/darkfish.js" defer></script>

<link href="../../../css/fonts.css" rel="stylesheet">
<link href="../../../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-3Awhite_check_mark-3A+htmltest">:white_check_mark: htmltest</a>
    <li><a href="#label-3Afloppy_disk-3A+Installation">:floppy_disk: Installation</a>
    <li><a href="#label-3Apenguin-3A+Linux+-2F+-3Agreen_apple-3A+OSX+-2F+-3Aiphone-3A+Arm">:penguin: Linux / :green_apple: OSX / :iphone: Arm</a>
    <li><a href="#label-System-wide+Install">System-wide Install</a>
    <li><a href="#label-Into+Current+Directory">Into Current Directory</a>
    <li><a href="#label-rdoc-image-3Ahttps-3A-2F-2Fuser-images.githubusercontent.com-2F1690934-2F30242799-17a573f2-9595-11e7-9aa5-04e34b04b0cd.png+Windows"><img src="https://user-images.githubusercontent.com/1690934/30242799-17a573f2-9595-11e7-9aa5-04e34b04b0cd.png"> Windows</a>
    <li><a href="#label-3Ablowfish-3A+OpenBSD">:blowfish: OpenBSD</a>
    <li><a href="#label-3Awhale-3A+Docker">:whale: Docker</a>
    <li><a href="#label-Notes">Notes</a>
    <li><a href="#label-3Acomputer-3A+Usage">:computer: Usage</a>
    <li><a href="#label-3Amicroscope-3A+What-27s+Tested-3F">:microscope: What&#39;s Tested?</a>
    <li><a href="#label-What-27s+Not">What&#39;s Not</a>
    <li><a href="#label-3Asee_no_evil-3A+Ignoring+content">:see_no_evil: Ignoring content</a>
    <li><a href="#label-3Abookmark_tabs-3A+Caching">:bookmark_tabs: Caching</a>
    <li><a href="#label-3Afax-3A+Logging">:fax: Logging</a>
    <li><a href="#label-3Awrench-3A+Configuration">:wrench: Configuration</a>
    <li><a href="#label-Basic+Options">Basic Options</a>
    <li><a href="#label-Example">Example</a>
    <li><a href="#label-3Aloudspeaker-3A+Issues-3F+Suggestions-3F">:loudspeaker: Issues? Suggestions?</a>
  </ul>
</div>


  <div id="project-metadata">
    
<div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
    <li><a href="../../../bin/ext/htmltest_0_12_1_linux_amd64/LICENCE.html">LICENCE</a>
    <li><a href="../../../bin/ext/htmltest_0_12_1_linux_amd64/README_md.html">README</a>
    <li><a href="../../../bin/ext/htmltest_0_12_1_osx_amd64/LICENCE.html">LICENCE</a>
    <li><a href="../../../bin/ext/htmltest_0_12_1_osx_amd64/README_md.html">README</a>
    <li><a href="../../../bin/ext/htmltest_0_12_1_windows_amd64/LICENCE.html">LICENCE</a>
    <li><a href="../../../bin/ext/htmltest_0_12_1_windows_amd64/README_md.html">README</a>
    <li><a href="../../../lib/utils/lunr_js.html">lunr.js</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page bin/ext/htmltest_0.12.1_osx_amd64/README.md">

<h1 id="label-3Awhite_check_mark-3A+htmltest">:white_check_mark: htmltest<span><a href="#label-3Awhite_check_mark-3A+htmltest">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p><a href="https://travis-ci.org/wjdp/htmltest"><img src="https://travis-ci.org/wjdp/htmltest.svg?branch=master"></a> <a href="https://goreportcard.com/report/github.com/wjdp/htmltest"><img src="https://goreportcard.com/badge/github.com/wjdp/htmltest"></a> <a href="https://codecov.io/gh/wjdp/htmltest"><img src="https://codecov.io/gh/wjdp/htmltest/branch/master/graph/badge.svg"></a> <a href="https://godoc.org/github.com/wjdp/htmltest"><img src="https://godoc.org/github.com/wjdp/htmltest?status.svg"></a></p>

<p>If you generate HTML files, <a href="https://github.com/gjtorikian/html-proofer">html-proofer</a> might be the tool for you. If you can&#39;t be bothered with a Ruby environment or fancy something a bit faster, htmltest may be a better option.</p>

<p>:mag: htmltest runs your HTML output through a series of checks to ensure all your links, images, scripts references work, your alt tags are filled in, <em>et cetera</em>.</p>

<p>:horse_racing: <em>Faster?</em> Yep, quite a bit actually. On <a href="https://github.com/newtheatre/history-project">a site</a> with over 2000 files htmlproofer took over <a href="https://travis-ci.org/newtheatre/history-project#L564">three minutes</a>, htmltest took <a href="https://travis-ci.org/newtheatre/history-project#L538">8.6 seconds</a>. Both tools had full valid caches.</p>

<p>:confused: <em>Why make another tool</em>: A mix of frustration with using htmlproofer/Ruby on large sites and needing a good project to get to grips with Go.</p>

<h2 id="label-3Afloppy_disk-3A+Installation">:floppy_disk: Installation<span><a href="#label-3Afloppy_disk-3A+Installation">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-3Apenguin-3A+Linux+-2F+-3Agreen_apple-3A+OSX+-2F+-3Aiphone-3A+Arm">:penguin: Linux / :green_apple: OSX / :iphone: Arm<span><a href="#label-3Apenguin-3A+Linux+-2F+-3Agreen_apple-3A+OSX+-2F+-3Aiphone-3A+Arm">&para;</a> <a href="#top">&uarr;</a></span></h3>

<h4 id="label-System-wide+Install">System-wide Install<span><a href="#label-System-wide+Install">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre>curl https://htmltest.wjdp.uk | sudo bash -s -- -b /usr/local/bin</pre>

<p>You&#39;ll be prompted for your password. After simply do <code>htmltest</code> to run.</p>

<h4 id="label-Into+Current+Directory">Into Current Directory<span><a href="#label-Into+Current+Directory">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre>curl https://htmltest.wjdp.uk | bash</pre>

<p>By default this will install <code>htmltest</code> into <code>./bin</code> of your current directory, to run do <code>bin/htmltest</code>. Rather suitable for CI environments.</p>

<h3 id="label-rdoc-image-3Ahttps-3A-2F-2Fuser-images.githubusercontent.com-2F1690934-2F30242799-17a573f2-9595-11e7-9aa5-04e34b04b0cd.png+Windows"><img src="https://user-images.githubusercontent.com/1690934/30242799-17a573f2-9595-11e7-9aa5-04e34b04b0cd.png"> Windows<span><a href="#label-rdoc-image-3Ahttps-3A-2F-2Fuser-images.githubusercontent.com-2F1690934-2F30242799-17a573f2-9595-11e7-9aa5-04e34b04b0cd.png+Windows">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>:arrow_down: Download the <a href="https://github.com/wjdp/htmltest/releases/latest">latest binary release</a> and put it somewhere on your PATH.</p>

<h3 id="label-3Ablowfish-3A+OpenBSD">:blowfish: OpenBSD<span><a href="#label-3Ablowfish-3A+OpenBSD">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>:arrow_down: Download the <a href="https://github.com/wjdp/htmltest/releases/latest">latest binary release</a> and put it somewhere on your PATH.</p>

<p>You can also build from sources by cloning this repo and running <code>sh build.sh</code>, which puts the <code>htmltest</code> executable in the <code>./bin</code> dir. Use in place, or install to path such as <code>/usr/local/bin</code>.</p>

<h3 id="label-3Awhale-3A+Docker">:whale: Docker<span><a href="#label-3Awhale-3A+Docker">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre>run -v $(pwd):/test --rm wjdp/htmltest</pre>

<p>Mount your directory with html files into the container and test them.</p>

<p>If you need more arguments to the test run it like this:<br> <code>docker run -v $(pwd):/test --rm wjdp/htmltest htmltest -l 3 -s</code></p>

<h3 id="label-Notes">Notes<span><a href="#label-Notes">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>We store temporary files in <code>tmp/.htmltest</code> by default. You probably want to ignore that in your version control system, and perhaps <a href="https://docs.travis-ci.com/user/caching/#Arbitrary-directories">cache it in your CI system</a>.</p>

<h2 id="label-3Acomputer-3A+Usage">:computer: Usage<span><a href="#label-3Acomputer-3A+Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>htmltest - Test generated HTML for problems
           https://github.com/wjdp/htmltest

Usage:
  htmltest [options] [&lt;path&gt;]
  htmltest -v --version
  htmltest -h --help

Options:
  &lt;path&gt;                       Path to directory or file to test, if omitted we
                               attempt to read from .htmltest.yml.
  -c FILE, --conf FILE         Custom path to config file.
  -h, --help                   Show this text.
  -l LEVEL, --log-level LEVEL  Logging level, 0-3: debug, info, warning, error.
  -s, --skip-external          Skip external link checks, may shorten execution
                               time considerably.
  -v, --version                Show version and build time.</pre>

<h2 id="label-3Amicroscope-3A+What-27s+Tested-3F">:microscope: What&#39;s Tested?<span><a href="#label-3Amicroscope-3A+What-27s+Tested-3F">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Many options of the following tests can customised. Items marked :soon: are not checked yet, but will be <em>soon</em>.</p>
<ul><li>
<p><code>a</code> <code>link</code> <code>img</code> <code>script</code>: Whether internal links work / are valid.</p>
</li><li>
<p><code>a</code>: Whether internal hashes work.</p>
</li><li>
<p><code>a</code> <code>link</code> <code>img</code> <code>script</code>: Whether external links work.</p>
</li><li>
<p><code>a</code>: :soon: Whether external hashes work.</p>
</li><li>
<p><code>a</code> <code>link</code>: Whether external links use HTTPS.</p>
</li><li>
<p><code>img</code>: Whether your images have valid alt attributes.</p>
</li><li>
<p><code>link</code>: Whether pages have a valid favicon.</p>
</li><li>
<p><code>meta</code>: Whether refresh tags are valid and the url works.</p>
</li><li>
<p><code>meta</code>: :soon: Whether images and URLs in the OpenGraph metadata are valid.</p>
</li><li>
<p><code>meta</code> <code>title</code>: :soon: Whether you&#39;ve got the <a href="https://support.google.com/webmasters/answer/79812?hl=en">recommended tags</a> in your head.</p>
</li><li>
<p><code>DOCTYPE</code>: Whether a doctype is correctly specified.</p>
</li></ul>

<h3 id="label-What-27s+Not">What&#39;s Not<span><a href="#label-What-27s+Not">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>I&#39;d like to test the following but won&#39;t be for a while.</p>
<ul><li>
<p>Whether your HTML markup is valid. htmlproofer has the ruby library <a href="http://www.nokogiri.org/tutorials/ensuring_well_formed_markup.html">Nokogiri</a>, I&#39;ve not found one for Go yet.</p>
</li></ul>

<h2 id="label-3Asee_no_evil-3A+Ignoring+content">:see_no_evil: Ignoring content<span><a href="#label-3Asee_no_evil-3A+Ignoring+content">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Add the <code>data-proofer-ignore</code> attribute to any tag to ignore it from every check. The name of this attribute can be customised.</p>

<pre>&lt;a href=&quot;http://notareallink&quot; data-proofer-ignore&gt;Not checked.&lt;/a&gt;</pre>

<h2 id="label-3Abookmark_tabs-3A+Caching">:bookmark_tabs: Caching<span><a href="#label-3Abookmark_tabs-3A+Caching">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Checking external URLs can slow tests down and potentially annoy the URL&#39;s host. htmltest caches the status code of checked external URLs and stores this cache between runs. We write the cache to <code>tmp/.htmltest/refcache.json</code> and expire items after two weeks by default.</p>

<h2 id="label-3Afax-3A+Logging">:fax: Logging<span><a href="#label-3Afax-3A+Logging">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>If you&#39;ve got a lot of errors, reading them off a TTY may be difficult. We write errors to <code>tmp/.htmltest/htmltest.log</code> by default. The log level is set in the config file.</p>

<h2 id="label-3Awrench-3A+Configuration">:wrench: Configuration<span><a href="#label-3Awrench-3A+Configuration">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>htmltest uses a YAML configuration file. Put <code>.htmltest.yml</code> in the same directory that you&#39;re running the tool from and you can just say <code>htmltest</code> to run your tests. You&#39;ll probably also want to cache the <code>tmp/.htmltest</code> directory.</p>

<h3 id="label-Basic+Options">Basic Options<span><a href="#label-Basic+Options">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Option | Description | Default | | :—– | :———- | :—— | | <code>DirectoryPath</code> | Directory to scan for HTML files. | | | <code>DirectoryIndex</code> | The file to look for when linking to a directory. | <code>index.html</code> | | <code>FilePath</code> | Single file to test within <code>DirectoryPath</code>, omit to test all. | | | <code>FileExtension</code> | Extension of your HTML documents, includes the dot. If <code>FilePath</code> is set we use the extension from that. | <code>.html</code> | | <code>CheckDoctype</code> | Enables checking the document type declaration. | <code>true</code> | | <code>CheckAnchors</code> | Enables checking <code>&lt;a…</code> tags. | <code>true</code> | | <code>CheckLinks</code> | Enables checking <code>&lt;link…</code> tags. | <code>true</code> | | <code>CheckImages</code> | Enables checking <code>&lt;img…</code> tags | <code>true</code> | | <code>CheckScripts</code> | Enables checking <code>&lt;script…</code> tags. | <code>true</code> | | <code>CheckMeta</code> | Enables checking <code>&lt;meta…</code> tags. | <code>true</code> | | <code>CheckGeneric</code> | Enables other tags, see items marked with checkGeneric on the <a href="https://github.com/wjdp/htmltest/wiki/Tags">tags wiki page</a>. | <code>true</code> | | <code>CheckExternal</code> | Enables external reference checking; all tag types. | <code>true</code> | | <code>CheckInternal</code> | Enables internal reference checking; all tag types. When disabled will prevent internal hash checking unless the reference only contains a hash fragment (<code>#heading</code>) and therefore refers to the current page. | <code>true</code> | | <code>CheckInternalHash</code> | Enables internal hash/fragment checking. | <code>true</code> | | <code>CheckMailto</code> | Enables–albeit quite basic–<code>mailto:</code> link checking. | <code>true</code> | | <code>CheckTel</code> | Enables–albeit quite basic–<code>tel:</code> link checking. | <code>true</code> | | <code>CheckFavicon</code> | Enables favicon checking, ensures every page has a favicon set. | <code>false</code> | | <code>CheckMetaRefresh</code> | Enables checking meta refresh tags. | <code>true</code> | | <code>EnforceHTML5</code> | Fails when the doctype isn&#39;t <code>&lt;!DOCTYPE html&gt;</code>. | <code>false</code> | | <code>EnforceHTTPS</code> | Fails when encountering an <code>http://</code> link. Useful to prevent mixed content errors when serving over HTTPS. | <code>false</code> | | <code>IgnoreURLs</code> | Array of regexs of URLs to ignore. | empty | | <code>IgnoreDirs</code> | Array of regexs of directories to ignore when scanning for HTML files. | empty | | <code>IgnoreInternalEmptyHash</code> | When true prevents raising an error for links with <code>href=&quot;#&quot;</code>. | <code>false</code> | | <code>IgnoreEmptyHref</code> | When true prevents raising an error for links with <code>href=&quot;&quot;</code>. | <code>false</code> | | <code>IgnoreCanonicalBrokenLinks</code> | When true produces a warning, rather than an error, for broken canonical links. When testing a site which isn&#39;t live yet or before publishing a new page canonical links will fail. | <code>true</code> | | <code>IgnoreExternalBrokenLinks</code> | When true produces a warning, rather than an error, for broken external links. Useful when testing a site having hundreds of external links. | <code>false</code> | | <code>IgnoreAltMissing</code> | Turns off image alt attribute checking. | <code>false</code> | | <code>IgnoreDirectoryMissingTrailingSlash</code> | Turns off errors for links to directories without a trailing slash. | <code>false</code> | | <code>IgnoreSSLVerify</code> | Turns off x509 errors for self-signed certificates. | <code>false</code> | | <code>IgnoreTagAttribute</code> | Specify the ignore attribute. All tags with this attribute will be excluded from every check. | <code>&quot;data-proofer-ignore&quot;</code> | | <code>HTTPHeaders</code> | Dictionary of headers to include in external requests | <code>{&quot;Range&quot;:  &quot;bytes=0-0&quot;, &quot;Accept&quot;: &quot;<strong>/</strong>&quot;}</code> | | <code>TestFilesConcurrently</code> | :warning: :construction: <em>EXPERIMENTAL</em> Turns on {concurrent}[https://github.com/wjdp/htmltest/wiki/Concurrency] checking of files. | <code>false</code> | | <code>DocumentConcurrencyLimit</code> | Maximum number of documents to process at once. | <code>128</code> | | <code>HTTPConcurrencyLimit</code> | Maximum number of open HTTP connections. If you raise this number ensure the <code>ExternalTimeout</code> is suitably raised. | <code>16</code> | | <code>LogLevel</code> | Logging level, 0-3: debug, info, warning, error. | <code>2</code> | | <code>LogSort</code> | How to sort/present issues. Can be <code>seq</code> for sequential output or <code>document</code> to group by document. | <code>document</code> | | <code>ExternalTimeout</code> | Number of seconds to wait on an HTTP connection before failing. | <code>15</code> | | <code>StripQueryString</code> | Enables stripping of query strings from external checks. | <code>true</code> | | <code>StripQueryExcludes</code> | List of URLs to disable query stripping on. | <code>[&quot;fonts.googleapis.com&quot;]</code> | | <code>OutputDir</code> | Directory to store cache and log files in. Relative to executing directory. | <code>tmp/.htmltest</code> | | <code>OutputCacheFile</code> | File within <code>OutputDir</code> to store reference cache. | <code>refcache.json</code> | | <code>OutputLogFile</code> | File within <code>OutputDir</code> to store last tests errors. | <code>htmltest.log</code> | | <code>CacheExpires</code> | Cache validity period, accepts <a href="https://golang.org/pkg/time/#ParseDuration">go.time duration strings</a> (…“m”, “h”). | <code>336h</code> (two weeks) |</p>

<h3 id="label-Example">Example<span><a href="#label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre>DirectoryPath: &quot;_site&quot;
EnforceHTTPS: true
IgnoreURLs:
- &quot;example.com&quot;
IgnoreDirs:
- &quot;lib&quot;
CacheExpires: &quot;6h&quot;</pre>

<h2 id="label-3Aloudspeaker-3A+Issues-3F+Suggestions-3F">:loudspeaker: Issues? Suggestions?<span><a href="#label-3Aloudspeaker-3A+Issues-3F+Suggestions-3F">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="https://github.com/wjdp/htmltest/issues/new">Submit an issue</a>.</p>

</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.3.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

